# 数组


# 数组的定义
- **数组** 是由 n ($n \geq 1$) 个相同类型的的数据元素构成的有限序列。是线性表的推广。

- **数组元素** 是数组中每个数据元素。其序号称为该元素的 **下标** 。下标的取值范围称为数组的 **维界** 。

- **维数** 即一维数组、二维数组等等多维数组的维数

- **数组的操作**
  - **初始化**
  - **存取元素**
  - **修改元素**
  - **销毁**





# 数组的存储结构
- **一维数组的存储结构**
  - 大小为 n 的 **一维数组元素 $a[i]$** 的 **存放地址** 为 $LOC(a_i) = LOC(a_0) + i * sizeof(EleType)$ $\quad$ ($0 \leq i < n$)

- **二维数组的存储结构**
  - **行优先存储**
    - M 行 N 列的二维数组 $a[M][N]$ 中，$a[i][j]$ 的存储地址为 $LOC(a_{i,j}) = LOC(a_{0,0}) + (i * N + j) * sizeof(ElemType)$
  - **列优先存储**
    - M 行 N 列的二维数组 $a[M][N]$ 中，$a[i][j]$ 的存储地址为 $LOC(a_{i,j}) = LOC(a_{0,0}) + (j * M + i) * sizeof(ElemType)$






# 矩阵的压缩存储
## 普通矩阵的存储
**普通矩阵** 可用 **二维数组** 存储。  
*注意* ：描述 **矩阵元素** 时，**行、列号** 通常 **从 1 开始** ；而描述 **数组** 时通常 **下标** **从 0 开始** 。




## 特殊矩阵的压缩存储
- 某些 **特殊矩阵** 可以 **压缩存储空间**

### 一、对称矩阵的压缩存储
- 若 n 阶 **方阵** 中任意一个元素 **$a_{i,j}$** 都有 **$a_{i,j} = a_{j,i}$** 则该矩阵为 **对称矩阵**

- **元素划分**
  - **上三角区 $i < j$**
  - **主对角线 $i = j$**
  - **下三角区 $i > j$**

- **压缩存储策略** ：只存储 **主对角线** 和 **上三角区（下三角区）**



### 二、三角矩阵的压缩存储
- **下三角矩阵** ：除了主对角线和下三角区，其余的元素都相同为同一常量 c 。

- **上三角矩阵** ：除了主对角线和上三角区，其余的元素都相同为同一常量 c 。

- **压缩存储策略** ：按 **行优先（列优先）原则** 把不是常量 c 的元素存入一维数组中，并在最后一个位置存储常量 c 。



### 三、三对角矩阵的压缩存储
- **三对角矩阵（带状矩阵）** ：当 $|i - j| > 1$ 时，有 $a_{i,j} = 0$ $\quad$$(1 \leq i , j \leq n)$ 。即所有非零元素都集中在以主对角线为中心的 3 条对角线的区域，其他区域的元素都为零。

- **压缩存储策略** ：按 **行优先（列优先）原则** ，只存储带状部分。



### 四、稀疏矩阵
- **稀疏矩阵** ：非零元素远远少于矩阵元素的个数

- **压缩存储策略**
  - 顺序存储 **三元组<行，列，值>** 。但会 **失去随机存取** 的特性
  - 链式存储 **十字链表法**





# 数组的使用
## 一、std::array：静态数组
1. 引入 **<array> 头文件**
    ```
    #include <array>  // 静态数组头文件
    ```

2. **初始化**
    ```
    // 初始化
    std::array<int, 5> arr1;  // 声明并默认初始化一个大小为 5 的整型数组（值未定义）
    
    std::array<int, 5> arr2 = {1, 2, 3};  // 声明一个大小为 5 的整型数组，并部分初始化，剩余为 0
    
    std::array<int, 5> arr3 = {1, 2, 3, 4, 5};  // 声明一个大小为 5 的整型数组，并统一初始化
    
    std::array<int, 5> arr4 = arr2;  // 复制 arr2 给 arr4

    std::array<std::array<int, 4>, 3> arr2D = {1, 2, 3};  // 声明一个 3 行 4 列的二维数组，并部分初始化，剩余为 0 。遵循行优先原则
    ```

3. **获取数组大小**
    ```
    // 获取数组大小
    std::cout << "数组 arr3 的大小为：" << arr3.size() << std::endl;
    ```

4. **判空**
    ```
    // 判空
    std::cout << "数组 arr3 是否为空: " << arr3.empty() << std::endl;
    ```

5. **访问元素**
   1. **无边界检查访问**
        ```
        // 访问元素
        // 无边界检查访问
        int value1 = arr3[2];
        std::cout << "无边界检查访问数组 arr3 的第三个元素为：" << value1 << std::endl;  // 3
        
        int val2D1 = arr2D[0][1];
        std::cout << "无边界检查访问数组 arr2D 的第一行第二列的元素：" << val2D1 << std::endl;  // 2
        ```
    2. **有边界检查访问**
        ```
        // 有边界检查访问
        int value2 = arr3.at(4);
        std::cout << "有边界检查访问数组 arr3 的第五个元素为：" << value2 << std::endl;  // 5

        // 有边界检查访问 越界 抛出std::out_of_range
        // int value3 = arr3.at(5);
        // try {
        //     std::cout << "有边界检查访问数组 arr3 的第六个元素（越界）为：" << value3 << std::endl;  // 抛出std::out_of_range
        // }
        // catch(const std::out_of_range& e) {
        //     std::cerr << "Error: " << e.what();
        // }

        int val2D2 = arr2D.at(0).at(1);
        std::cout << "有边界检查访问数组 arr2D 的第一行第二列的元素：" << val2D2 << std::endl;
        ```
    3. **访问第一个元素**
        ```
        // 访问第一个元素
        int front = arr3.front();
        std::cout << "数组 arr3 的第一个元素为：" << front << std::endl;
        ```
    4. **访问最后一个元素**
        ```
        // 访问最后一个元素
        int back = arr3.back();
        std::cout << "数组 arr3 的最后一个元素为：" << back << std::endl;
        ```
    5. **使用指针访问**
        ```
        // 使用指针访问元素
        int* ptr = arr3.data();  // 获取底层数组指针 获取第一个元素的地址
        std::cout << "数组 arr3 的底层数组指针为: " << ptr << std::endl;

        int value4 = *(ptr + 2);  // 获取第三个元素的值
        std::cout << "指针访问数组 arr3 的第三个元素：" << value4 << std::endl;
        ```
    6. **范围for循环数组**
        ```
        // 范围for循环数组
        std::cout << "数组 arr3 为：";
        for(int num : arr3) {
            std::cout << num << " ";
        }
        std::cout << std::endl;

        std::cout << "数组 arr2D 为：" << std::endl;
        for(const auto& row : arr2D) {
            for(const auto& elem : row) {
                std::cout << elem << " ";
            }
            std::cout << std::endl;
        }
        ```

6. **修改元素**
   1. **无边界检查**
        ```
        // 修改元素
        // 无边界检查访问，修改数组 arr3 的第三个元素为 10
        arr3[2] = 10;
        
        // 无边界检查访问，修改数组 arr2D 的第一行第二个元素为 10
        arr2D[0][1] = 10;
        ```
   2. **有边界检查**
        ```
        // 有边界检查访问，修改数组 arr3 的第四个元素为 20
        arr3.at(3) = 20;

        // 有边界检查访问，修改数组 arr2D 的二行第三列元素为 20
        arr2D.at(1).at(2) = 20;
        ```
    3. **填充元素**
        ```
        // 填充元素
        arr2.fill(2);  // 把所有元素都赋值为 2
        ```
    4. **交换内容**
        ```
        // 交换内容
        arr1.swap(arr2);  // 交换两个同类型数组，交换数组 arr1 和 数组 arr2 的内容
        ```